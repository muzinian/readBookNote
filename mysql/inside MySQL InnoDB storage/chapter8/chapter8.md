### 8.1节
MySQL数据库replication的原理就是异步实时将二进制日志重做并应用到从(slave/standby)数据库。xtrabackup工具的工作原理是记录当前每页最后的检查点LSN，如果大于全备时的LSN，就备份该页，否则不用备份。

数据库备份需要考虑备份一致性，要求备份的时候数据在这一时间点上是一致的。InnoDB在RR隔离级别下可以通过开启一个事务，然后导出相关表最后提交来得到一致性备份，但是，如果在业务上有按照最终一致性的方式处理的事务，有可能会出现数据不一致，比如，下单发货分成了两个事务，下单一个，发货一个，就会导致在某个时间点上无法一致。mysqldump备份工具可以通过添加`--single-transcation`选项获得InnoDB的一致性备份，原理就是前面说的。

### 8.2节
InnoDB的冷备只需要备份MySQL数据库的frm文件，共享表空间文件，独立表空间文件(*.ibd)，重做日志文件和my.cnf配置文件。

### 8.3节
略

### 8.4节
备份二进制文件前，可以通过FLUSH LOGS生成新的binlog，然后再备份之前的binlog，使用binlog恢复是通过`mysqlbinlog`命令操作的`mysqlbinlog [options] log_file...`，如果需要恢复多个binlog文件，最正确的做法是同时恢复多个binlog，而不是一个一个的恢复，即`mysqlbinlog binlog.[0-10]*|mysql -uroot -p test`
### 8.5节
ibbackup是innoDB存储官方提供的热备工具(收费)，可以同时备份MyISAM存储引擎和InnoDB存储引擎，对于InnoDB备份的原理：
1. 记录备份开始时，InnoDB redo log检查点的LSN
2. 复制共享表空间文件和独立表空间文件
3. 记录复制完表空间文件后，innoDB重做日志文件检查点的LSN
4. 复制在备份时产生的redo log
由于备份期间不会对数据库本身有任何影响，所有操作都只是复制数据库文件，因此可以对数据库执行任何操作，不会阻塞。ibbackup的恢复步骤：
1. 恢复表空间文件
2. 应用重做日志文件

XtraBackup是一款开源热备工具，不仅支持全量备份，还支持增量备份，增量备份的原理是：
1. 首选完成一个全备，并记录一个此时检查点的LSN
2. 进行增量备份的时候，比较表空间每个页的LSN是否大于上次备份的LSN，如果是，备份该页，同时记录当前检查点的LSN
(具体用法参考相关文档)
### 8.6节
快照备份要依靠文件系统的快照功能对数据库进行备份(具体参见相关文档)
### 8.7节
复制(replication)的原理：
1. 主服务器把数据更改记录到binlog中
2. 从服务器把主服务器的binlog复制到自己的中继日志(relay log)中
3. 从服务器重做中继日志的日志，把更改应用到自己的数据库中，达到数据的最终一致性
复制不是完全实时地进行同步，而是异步实时的。从服务器有两个线程，一个是I/O线程，负责读取主服务器的binlog，并保存为中继日志，另一个是SQL线程，负责执行中继日志。可以通过`SHOW SLAVE STATUS`和`SHOW MASTER STATUS`查看主从的延迟。可以在从服务器上开启仅与主服务器进行同步，避免其它线程修改数据。
